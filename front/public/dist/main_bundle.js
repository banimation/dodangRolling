(()=>{"use strict";const e=document.getElementById("welcome"),t=document.getElementById("logout"),n=document.getElementById("same-class-user-list"),s=document.getElementById("profile-image"),a=document.getElementById("open-my-rolling-paper"),d=document.getElementById("my-rolling-paper-container"),c=document.getElementById("back"),i=document.getElementById("search-input"),o=document.getElementById("search-container"),r=document.getElementById("search-user-list");let l;fetch("/get-session",{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>{const a=t.session;l=a,e.innerText+=`${l.grade}-${l.group} ${l.nickName}님 반가워요!`,s.src=`/texture/profile/${l.profileImage}.png`,fetch("/get-same-class-user-data",{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{e.data.forEach((e=>{if(e.uid!==l.uid){const t=document.createElement("div"),s=document.createElement("img"),a=document.createElement("div");t.classList.add("same-class-user"),s.classList.add("same-class-user-image"),s.src=`/texture/profile/${e.profileImage}.png`,a.innerText=e.nickName,e.isTeacher&&(t.style.backgroundColor="#4F59D6"),t.append(s),t.append(a),n.append(t)}}))}))})),t.addEventListener("click",(()=>{fetch("/sign-out",{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{"succeed"===e.msg&&location.reload()}))})),a.addEventListener("click",(()=>{d.classList.remove("hidden-right")})),c.addEventListener("click",(()=>{d.classList.add("hidden-right")})),i.addEventListener("focusin",(()=>{o.classList.remove("hidden")})),i.addEventListener("focusout",(()=>{o.classList.add("hidden")})),i.addEventListener("input",(()=>{const e={search:i.value};fetch("/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{r.replaceChildren();const t=e.data;t&&t.forEach((e=>{const t=document.createElement("div"),n=document.createElement("div"),s=document.createElement("img"),a=document.createElement("div");t.classList.add("search-user-container"),s.classList.add("search-user-image"),a.classList.add("write-rolling-paper"),s.src=`/texture/profile/${e.profileImage}.png`,n.innerText=`${e.nickName}`;let d=!1;JSON.parse(l.writtenUser).forEach((t=>{e.uid===t&&(d=!0)})),a.innerHTML=d?'<span class="material-symbols-outlined">edit</span>':'<span class="material-symbols-outlined">add</span>',t.append(s),t.append(n),t.append(a),r.append(t)}))}))}))})();